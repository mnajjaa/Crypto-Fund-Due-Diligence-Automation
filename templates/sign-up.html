{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Meta -->
    <meta name="description" content="">
    <meta name="author" content="Themepixels">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="../assets/img/favicon.png">

    <title>DueDeals - Sign-Up</title>

    <!-- Vendor CSS -->
    <link rel="stylesheet" href="{% static 'lib/remixicon/fonts/remixicon.css'%}">

    <!-- Template CSS -->
    <link rel="stylesheet" href="{% static 'css/style.min.css' %}">
  </head>
  <body class="page-sign" style="background-color:#f4f4f4;">

    <div class="card card-sign" style="width: 500px; height: auto;">
      <div class="card-header">
          <a href="../" class="header-logo mb-4">DueDeals</a>
          <h3 class="card-title">Sign Up</h3>
          <p class="card-text">It's free to signup and only takes a minute.</p>
      </div><!-- card-header -->
      <div class="card-body">
          <!-- Display form errors -->
          {% if messages %}
          {% for message in messages %}
            <div class="alert {% if message.tags == 'success' %}alert-success{% else %}alert-danger{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        {% endif %}
        

  
          <!-- Sign Up Form -->
          <form method="POST">
              {% csrf_token %}
              <!-- First Name and Last Name on the same line -->
              <div class="row">
                  <div class="col-md-6 mb-3">
                      <label for="id_first_name" class="form-label">First name</label>
                      <input type="text" class="form-control"  name="first_name"  placeholder="Enter first name" required>
                  </div>
                  <div class="col-md-6 mb-3">
                      <label for="id_last_name" class="form-label">Last name</label>
                      <input type="text" class="form-control"  name="last_name" placeholder="Enter last name" required>
                  </div>
              </div>

              <div class="mb-3">
                  <label for="id_username" class="form-label">Username</label>
                  <input type="text" class="form-control"  name="username" placeholder="Enter your username" required>
              </div>
              <div class="mb-3">
                  <label for="id_email" class="form-label">Email address</label>
                  <input type="email" class="form-control" name="email"  placeholder="Enter your email" required>
              </div>
              <div class="mb-3">
                <label for="id_password" class="form-label">Password</label>
                <input type="password" class="form-control" name="password" id="password" placeholder="Enter your password" required>
                <div id="password-error" class="text-danger mt-1" style="font-size: 14px;"></div>
            </div>
            <div class="mb-3">
                <label for="id_password2" class="form-label">Confirm Password</label>
                <input type="password" class="form-control" name="confirm_password" id="id_password2" placeholder="Confirm your password" required>
            </div>
            
             
              <button class="btn btn-primary btn-sign" type="submit" value="Register">Create Account</button>
          </form>

          
      </div><!-- card-body -->
      <div class="card-footer">
          Already have an account? <a href="{% url 'login' %}">Sign In</a>
      </div><!-- card-footer -->
    </div><!-- card -->

    <script src="{% static 'lib/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'lib/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
     <!--   Core JS Files   -->
  <script src= "{% static 'js/core/popper.min.js' %}"></script>
  <script src="{% static 'js/core/bootstrap.min.js' %}"></script>
  <script src="{% static 'js/plugins/perfect-scrollbar.min.js' %}"></script>
  <script src="{% static 'js/plugins/smooth-scrollbar.min.js' %}"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const usernameInput = document.querySelector('input[name="username"]');
            const emailInput = document.querySelector('input[name="email"]');
        
            // Function to create or update error messages
            function createErrorMessage(field, message) {
                let errorDiv = field.nextElementSibling;
        
                // If the error div doesn't exist, create it
                if (!errorDiv || !errorDiv.classList.contains("error-message")) {
                    errorDiv = document.createElement("div");
                    errorDiv.className = "error-message";
                    errorDiv.style.color = "red";
                    errorDiv.style.fontSize = "14px";
                    errorDiv.style.marginTop = "5px";
                    field.after(errorDiv);
                }
        
                // Update the error message
                errorDiv.innerText = message;
            }
        
            
       
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const passwordInput = document.querySelector('input[name="password"]');
            const submitButton = document.querySelector('button[type="submit"]');
            
            // Create a validation message container
            const validationMessage = document.createElement("div");
            validationMessage.className = "error-message";
            validationMessage.style.fontSize = "14px";
            validationMessage.style.marginTop = "5px";
            passwordInput.after(validationMessage);
        
            function validatePassword() {
                const password = passwordInput.value;
                let errors = [];
        
                // Check for minimum length
                if (password.length < 6) {
                    errors.push("At least 6 characters");
                }
                // Check for at least one number
                if (!/\d/.test(password)) {
                    errors.push("At least one number");
                }
                // Check for at least one special character
                if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
                    errors.push("At least one special character");
                }
        
                // Update validation message
                if (errors.length > 0) {
                    validationMessage.innerHTML = errors.join("<br>");
                    validationMessage.style.color = "red";
                    passwordInput.style.borderColor = "red";
                    submitButton.disabled = true;
                } else {
                    validationMessage.innerHTML = "Password is strong!";
                    validationMessage.style.color = "green";
                    passwordInput.style.borderColor = "green";
                    submitButton.disabled = false;
                }
            }
        
            // Listen for input changes
            passwordInput.addEventListener("input", validatePassword);
        });
        </script>
        
    
    <script>
      var win = navigator.platform.indexOf('Win') > -1;
      if (win && document.querySelector('#sidenav-scrollbar')) {
        var options = {
          damping: '0.5'
        }
        Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
      }
    </script>
    
    <script>

        // Auto-hide alerts after 4 seconds
        setTimeout(function () {
          const alerts = document.querySelectorAll('.alert');
          alerts.forEach(function(alert) {
            alert.style.transition = 'opacity 0.5s ease';
            alert.style.opacity = '0';
            setTimeout(() => alert.remove(), 500);
          });
        }, 4000);
      </script>
      

</body>
</html>